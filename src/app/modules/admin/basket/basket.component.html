<div id="tt-pageContent">
  <div class="section-wrapper subpages-inner section-marker m-basket">
    <div class="container container-fluid-lg ">
      <div class="section-indent05 forgotpassword">
        <div class="container">
          <div class="row basket-container">
            <div class="basket-event-detail col-12 col-md-12 col-lg-8 basket po-relative" style="position: relative;"
              [@flyOut] *ngIf="!paymentProcess && !guestFormOpened">
              <div class="m-basket__header">
                <h3 class="m-basket__header--title">{{'baskettitle'| transloco}}</h3>
              </div>
              <div class="m-basket__body">
                <div class="m-basket__item">
                  <div class="m-basket__content">
                    <div class="row m-basket__contentPanel" *ngFor="let item of basketItems">
                      <div class="m-basket__figure"><a class="m-basket__figureLink">
                          <img
                            src="{{item?.image ?? 'https://veboni.blob.core.windows.net/5fbfb39a-7fd3-47ff-80cc-bdd3bceb7718/pms/jpeg/73105482-6884-4eff-9bec-728de2f73b4a.jpeg'}}"
                            width="164" height="227" (click)="routeItem(item)" class="m-basket__figureImg -lazyImage">

                        </a></div>
                      <div class="m-basket__optionContent">
                        <div class="m-basket__optionHeader"><a class="m-basket__productInfo--link"><strong
                              class="m-basket__productInfoCategory">{{item?.remarkDisplay ?? ''}}</strong>
                            <span class="m-basket__productInfoName">{{ item.date | localizedDate:'dddd, MMMM DD, YYYY'}}
                            </span>
                            <span class="m-basket__productInfoName"> {{ item.sessionTime }}</span>
                            <span class="m-basket__productInfoName"> {{ item.categoryDisplay}}</span>
                          </a>
                        </div>
                        <div class="m-basket__variantionName -mobileHide" *ngIf="item.extraServices.length >0">
                          Extralar: <span *ngFor="let service of item.extraServices; let last = last">
                            {{ service.count }} x {{ service.name }}{{ !last ? ',' : '' }}
                          </span>
                        </div>

                        <div class="m-basket__productTools">
                          <div class="m-basket__productInfo">
                            <div class="m-basket__productPrice">
                              <!-- sale -->
                              <!-- <div class="m-productPrice">
                                <div class="m-productPrice__discount"><span
                                    class="m-productPrice__discountValue">-%10</span></div>
                                <div class="m-productPrice__content"><span class="m-productPrice__oldPrice">{{
                                    ((+item.adultCount * +item.adultPrice) + (+item.adultCount * +item.adultPrice / 10))
                                    | currency:'':'':'1.2-2' }} TL
                                  </span> <span class="m-productPrice__salePrice">{{ (+item.adultCount *
                                    +item.adultPrice)
                                    | currency:'':'':'1.2-2' }} TL</span></div>
                              </div> -->
                              <div class="m-productPrice">
                                <div class="m-productPrice__discount">
                                  <!-- <span
                                    class="m-productPrice__discountValue">-%10</span> -->
                                </div>
                                <div class="m-productPrice__content">
                                  <!-- <span class="m-productPrice__oldPrice">{{
                                    (+item.totalPrice )
                                    | currency:'':'':'1.2-2' }} TL
                                  </span> -->
                                  <span class="m-productPrice__salePrice">{{ (+item.totalPrice )
                                    | currency:'':'':'1.2-2' }} TL</span>
                                </div>
                              </div>
                              <!-- <div class="m-productPrice">
                                <div class="m-productPrice__content">
                                  <span class="m-productPrice__salePrice">2.250,00
                                    TL</span>
                                </div> 
                              </div>-->

                            </div>
                            <div class="m-basket__features">
                              <div class="m-basket__quantity">
                                <div class="m-basket__variantionName -mobileHide">
                                  {{'adult'| transloco}}:
                                </div>
                                <div class="center" id="basket-item-inc">
                                  <div class="number-input-wrapper">
                                    <div class="number-input adultCount" [attr.min]="min" [attr.max]="max"
                                      [attr.step]="step" [attr.value]="value">
                                      <button type="button" class="btn-input"
                                        (click)="decrease(item.itemRecId , 'adultCount')">
                                        <mat-icon class="btn-amount">remove</mat-icon>
                                      </button>
                                      <div class="value">
                                        <span class="number">{{ item.adultCount }}</span>
                                        <!-- <span class="text">Quantity</span> -->
                                      </div>
                                      <button type="button" class="btn-input"
                                        (click)="increase(item.itemRecId, 'adultCount')">
                                        <mat-icon class="btn-amount">add</mat-icon>
                                      </button>
                                    </div>
                                  </div>
                                </div>



                                <div *ngIf="!item.childCheck" style="margin-left: 0.4em;"
                                  class="m-basket__variantionName -mobileHide">
                                  {{'child'| transloco}}:
                                </div>
                                <div *ngIf="!item.childCheck" class="center">
                                  <div class="number-input-wrapper">
                                    <div class="number-input childCount" [attr.min]="min" [attr.max]="max"
                                      [attr.step]="step" [attr.value]="value">
                                      <button type="button" class="btn-input"
                                        (click)="decrease(item.itemRecId , 'childCount')">
                                        <mat-icon class="btn-amount">remove</mat-icon>
                                      </button>
                                      <div class="value">
                                        <span class="number">{{ item.childCount }}</span>
                                        <!-- <span class="text">Quantity</span> -->
                                      </div>
                                      <button type="button" class="btn-input"
                                        (click)="increase(item.itemRecId, 'childCount')">
                                        <mat-icon class="btn-amount">add</mat-icon>
                                      </button>
                                    </div>
                                  </div>
                                </div>
                                <div class="m-select -small" *ngIf="false"><select #quantitySelect
                                    id="quantitySelect0-key-0" value="1" [(ngModel)]="item.adultcount"
                                    (ngModelChange)="onQuantityChange($event, item.sessionId)"
                                    class="a-selectControl -small">
                                    <option selected *ngFor="let quantity of quantityOptions" [value]="quantity">{{
                                      quantity }}
                                      adet</option>

                                  </select></div>
                              </div>
                              <!-- <div class="m-basket__quantity" style="width: fit-content;padding-top: 0.5em;">
                                <div class="m-basket__variantionName -mobileHide" *ngIf="item.extraServices.length >0">
                                  Extralar: <span *ngFor="let service of item.extraServices; let last = last">
                                    {{ service.count }} x {{ service.name }}{{ !last ? ',' : '' }}
                                  </span>
                                </div>
                              </div> -->
                            </div>
                          </div>
                        </div>


                      </div>
                      <div class="extra-section w-100 pt-2" *ngIf="item.avaliableExtras.length>0">
                        <mat-accordion class="extra-panel" id="basket-Item" style="padding-bottom: 5px;">
                          <mat-expansion-panel class="extrapanel" [expanded]="item.basketExtend">
                            <mat-expansion-panel-header>
                              <mat-panel-title class="basket-panel-title cl-w">
                                {{'extra-section-tittle' | transloco}}
                              </mat-panel-title>
                              <!-- <button type="button" class="btn-remove-selected" aria-label="Close"
                                                                        (click)="removeBasketItem(i)">
                                                                        <mat-icon matSuffix style="color: black !important;">cancel</mat-icon>
                                                                      </button> -->
                            </mat-expansion-panel-header>
                            <div class="eventDetail  mainEventDetailExtras extra-services extra-services-basket"
                              *ngFor="let extraitem of item.avaliableExtras; let ei = index">
                              <div class="extra-Image col-xs-12">
                                <div class="extraImg-container-basket">
                                  <img
                                    [src]="extraitem.imageList && extraitem.imageList.length > 0 ? extraitem.imageList[0] : 
                                                'https://veboni.blob.core.windows.net/5fbfb39a-7fd3-47ff-80cc-bdd3bceb7718/pms/jpeg/73105482-6884-4eff-9bec-728de2f73b4a.jpeg'"
                                    alt="Cosmos Theatre">
                                </div>
                                <div class="seansListWrap">
                                  <div class="seansListInner">
                                  </div>
                                </div>
                              </div>
                              <div class="eventLeft extra-content col-xs-12">
                                <div class="blocktitle-basket">
                                  <!-- <div class="tt-caption">Cosmos Theatre - Küçük Prens</div> -->
                                  <h1 class="extra-title-basket">{{extraitem.nameDisplay}}</h1>
                                </div>

                                <h3 class="subTitle extra-title-basket">{{'extradetails'|transloco}}:</h3>
                                <div class="main" [innerHtml]=""></div>
                              </div>
                              <div class="eventRight  col-xs-12" style="justify-content: flex-end;">
                                <div class="price-section extra-price-basket">
                                  <span class="price extra-basket-price">{{ extraitem.price | currency:'':'':'1.2-2'}}
                                    {{extraitem.currencyName}}</span>
                                </div>
                              </div>
                              <div class="number-input-wrapper extra-basket-buttons">
                                <div class="number-input adultCount" [attr.min]="min" [attr.max]="max"
                                  [attr.step]="step" [attr.value]="value">
                                  <button type="button" class="btn-input" (click)="removeExtras(extraitem.recId, item)">
                                    <mat-icon class="btn-amount">remove</mat-icon>
                                  </button>
                                  <div class="value">
                                    <span class="number">{{ extraitem.count }}</span>
                                  </div>
                                  <button type="button" class="btn-input" (click)="addExtras(extraitem.recId, item)">
                                    <mat-icon class="btn-amount">add</mat-icon>
                                  </button>
                                </div>
                              </div>
                            </div>
                          </mat-expansion-panel>
                        </mat-accordion>
                      </div>
                      <div class="m-basket__options pt-2">
                        <div class="m-basket__optionsItem">
                          <button id="removeCartItemBtn0-key-0" type="button" class="m-basket__remove"
                            (click)="removeItem(item)">
                            <mat-icon id="delete-icon">delete</mat-icon>{{ 'delete' | transloco}}
                          </button>
                        </div>
                      </div>
                      <!-- <div class="row" style="padding-bottom: 20px;">
                        <mat-accordion id="basket-Item" *ngFor="let item of basketRooms; let i = index"
                          style="padding-bottom: 5px;">
                          <mat-expansion-panel [expanded]="item.basketExtend">
                            <mat-expansion-panel-header>
                              <mat-panel-title class="basket-panel-title">
                                {{item.name}}
                              </mat-panel-title>
                              <button type="button" class="btn-remove-selected" aria-label="Close"
                                (click)="removeBasketItem(i)">
                                <mat-icon matSuffix style="color: black !important;">cancel</mat-icon>

                           
                              </button>
                            </mat-expansion-panel-header>
                            <div class="row"> 
                              <div class="col-6 custom-basket-img">
                                <img class="roomImage" src="{{item.image}}">
                              </div>
                              <div class="col-6">
                                <div class="span">{{address}}</div>
                              </div>
                            </div>
                            <div class="row space-date-row">
                              <div class="col-6 check-in-out">
                                <div class="check-in-content">
                                  <div class="check-in-out-header">
                                    <div class="check-title">
                                      {{'Checkin'| transloco}}
                                    </div>
                                    <div class="check-time">
                                      {{checkinTime}}
                                    </div>
                                  </div>
                                  <div class="check-in-out-cont">
                                    <div class="check-in-out-day">
                                      {{item.checkinDay.toString().toLowerCase() | transloco}}
                                    </div>
                                    <div class="check-in-out-moreInf">
                                      <div class="check-in-out-m">
                                        {{item.checkindateName.toString().toLowerCase()| transloco}}
                                      </div>
                                      <div class="check-in-out-my">
                                        {{item.checkinMonth.toString().toLowerCase() | transloco}} {{item.checkinYear}}
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                              <div class="col-6 check-in-out">
                                <div class="check-in-content">
                                  <div class="check-in-out-header">
                                    <div class="check-title">
                                      {{'Checkout'| transloco}}
                                    </div>
                                    <div class="check-time">
                                      {{checkoutTime}}
                                    </div>
                                  </div>
                                  <div class="check-in-out-cont">
                                    <div class="check-in-out-day">
                                      {{item.checkoutDay.toString().toLowerCase() | transloco}}
                                    </div>
                                    <div class="check-in-out-moreInf">
                                      <div class="check-in-out-m">
                                        {{item.checkoutdateName.toString().toLowerCase() | transloco}}
                                      </div>
                                      <div class="check-in-out-my">
                                        {{item.checkoutMonth.toString().toLowerCase() | transloco}}
                                        {{item.checkoutYear}}
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                            <hr />
                            <div class="row">
                              <div class="span room-name-pax">{{item.name}}</div>
                            </div>
                            <div class="row">
                              <div class="col-md-6"></div>
                              <div class="col-md-6">
                                <div class="basket-panel-title room-price" style="justify-content: right;">
                                  {{item.totalRoomPrice}} {{item.currency}}
                                </div>
                              </div>
                            </div>
                            <div class="row">
                              <div class="span" style="display: flex; align-items: center; justify-content: right;">
                                {{item.roomCount}} {{'Room'|transloco}} ve {{ item.night }} {{'Night Price'| transloco}}

                              </div>
                            </div>
                            <hr />
                            <div class="row">
                              <div class="room-details">
                                <div class="room-cont">
                                  <div class="room-boardtype">
                                    {{item.board}}
                                  </div>
                                  <div class="room-ratetype">
                                    {{'Refundable'| transloco}}
                                  </div>
                                </div>
                                <div class="room-pax-content">
                                  <div class="room-pax-cont" *ngIf="item.paxCount < 4">
                                    <i class="align-icons pax-svg-room"
                                      *ngFor="let _ of [].constructor(item.paxCount); let i = index" aria-hidden="true">
                                      <svg height="100%" width="100%" viewBox="0 0 190 518">
                                        <path withd="9px" height="24px"
                                          d="M 96 0 c 35.346 0 64 28.654 64 64 s -28.654 64 -64 64 s -64 -28.654 -64 -64 S 60.654 0
                                          96 0 m 48 144 h -11.36 c -22.711 10.443 -49.59 10.894 -73.28 0 H 48 c -26.51 0 -48 21.49 -48 48
                                          v 136 c 0 13.255 10.745 24 24 24 h 16 v 136 c 0 13.255 10.745 24 24 24 h 64 c 13.255 0 24
                                          -10.745 24 -24 V 352 h 16 c 13.255 0 24 -10.745 24 -24 V 192 c 0 -26.51 -21.49 -48 -48 -48 Z">
                                        </path>
                                      </svg></i>

                                  </div>
                                  <div class="room-pax-cont" *ngIf="item.paxCount>= 4">
                                    <span class="d-flex align-items-center text-left">{{item.paxCount}} x
                                    </span>
                                    <i class="align-icons pax-svg-room" aria-hidden="true">
                                      <svg height="100%" width="100%" viewBox="0 0 190 518">
                                        <path withd="9px" height="24px"
                                          d="M 96 0 c 35.346 0 64 28.654 64 64 s -28.654 64 -64 64 s -64 -28.654 -64 -64 S 60.654 0
                                        96 0 m 48 144 h -11.36 c -22.711 10.443 -49.59 10.894 -73.28 0 H 48 c -26.51 0 -48 21.49 -48 48
                                        v 136 c 0 13.255 10.745 24 24 24 h 16 v 136 c 0 13.255 10.745 24 24 24 h 64 c 13.255 0 24
                                        -10.745 24 -24 V 352 h 16 c 13.255 0 24 -10.745 24 -24 V 192 c 0 -26.51 -21.49 -48 -48 -48 Z">
                                        </path>
                                      </svg>
                                    </i>
                                  </div>

                                  <div class="room-pax-cont" *ngIf="(item.childCount < 4) && (item.childCount !== 0)">
                                    <i class="align-icons pax-svg-room"
                                      *ngFor="let _ of [].constructor(item.childCount); let i = index"
                                      aria-hidden="true">
                                      <svg height="100%" width="100%" viewBox="0 0 201 533">
                                        <path d="M 120 72 c 0 -39.765 32.235 -72 72 -72 s 72 32.235 72 72 c 0 39.764 -32.235 72 -72 72 s -72 -32.236 
                                          -72 -72 Z m 254.627 1.373 c -12.496 -12.497 -32.758 -12.497 -45.254 0 L 242.745 160 H 141.254 L 54.627 
                                          73.373 c -12.496 -12.497 -32.758 -12.497 -45.254 0 c -12.497 12.497 -12.497 32.758 0 45.255 L 104 213.254 
                                          V 480 c 0 17.673 14.327 32 32 32 h 16 c 17.673 0 32 -14.327 32 -32 V 368 h 16 v 112 c 0 17.673 14.327 
                                          32 32 32 h 16 c 17.673 0 32 -14.327 32 -32 V 213.254 l 94.627 -94.627 c 12.497 -12.497 12.497 -32.757 
                                          0 -45.254 Z">
                                        </path>
                                      </svg></i>
                                  </div>

                                  <div class="room-pax-cont" *ngIf="item.childCount >= 4">
                                    <span class="d-flex align-items-center text-left">{{item.childCount}} x
                                    </span>
                                    <i class=" icon-child align-icons pax-svg-room" aria-hidden="true">
                                      <svg height="100%" width="100%" viewBox="0 0 201 533">
                                        <path d="M 120 72 c 0 -39.765 32.235 -72 72 -72 s 72 32.235 72 72 c 0 39.764 -32.235 72 -72 72 s -72 -32.236 
                                        -72 -72 Z m 254.627 1.373 c -12.496 -12.497 -32.758 -12.497 -45.254 0 L 242.745 160 H 141.254 L 54.627 
                                        73.373 c -12.496 -12.497 -32.758 -12.497 -45.254 0 c -12.497 12.497 -12.497 32.758 0 45.255 L 104 213.254 
                                        V 480 c 0 17.673 14.327 32 32 32 h 16 c 17.673 0 32 -14.327 32 -32 V 368 h 16 v 112 c 0 17.673 14.327 
                                        32 32 32 h 16 c 17.673 0 32 -14.327 32 -32 V 213.254 l 94.627 -94.627 c 12.497 -12.497 12.497 -32.757 
                                        0 -45.254 Z">
                                        </path>
                                      </svg></i>
                                  </div>
                                </div>

                              </div>
                            </div>
                            
                          </mat-expansion-panel>
                        </mat-accordion>
                      </div> -->

                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="basket-event-detail col-12  col-md-12 col-lg-8 basket po-relative" [@flyOut]
              *ngIf="guestFormOpened">
              <div class="row-guest d-flex">
                <div class="col-md-12 mb-4">
                  <div class="card mb-4">
                    <ng-template matStepLabel>Guest Informations</ng-template>
                    <div class="rooms" *ngFor="let item of basketItems; let i = index">
                      <h3 class="guest-Detail-Hotel">{{item?.remarkDisplay ?? ''}}</h3>
                      <h4 class="roomInfo-Header">{{ item.categoryDisplay}}</h4>
                      <div class="guest-Cont"
                        *ngFor="let _ of [].constructor(item.adultCount + item.childCount); let guestIndx = index">
                        <div class="row-guest" [formGroup]="getFormGroup(i, guestIndx)">
                          <div class="guest-title-col">
                            <h5 class="gounst-title">{{ guestIndx + 1 }}. Guest:
                              {{ guestIndx + 1 > item.adultCount ? 'Child' : 'Adult' }}
                            </h5>
                          </div>
                          <div class="col-2 guest-from-detail pr-1">
                            <mat-form-field id="basket-form" class="flex-auto">
                              <mat-label>{{ 'gender' | transloco}}</mat-label>
                              <mat-select [formControlName]="'gender'" required>
                                <mat-option *ngFor="let option of genderType" [value]="option.id">
                                  {{ option.name }}
                                </mat-option>
                              </mat-select>
                            </mat-form-field>
                          </div>
                          <div class="col-3 guest-from-detail">
                            <mat-form-field id="basket-form" class="flex-auto">
                              <mat-label>{{'name'| transloco}}</mat-label>
                              <input matInput [formControlName]="'name'" />
                            </mat-form-field>
                          </div>
                          <div class="col-4 guest-from-detail">
                            <mat-form-field id="basket-form" class="flex-auto">
                              <mat-label>{{'surname'| transloco}}</mat-label>
                              <input matInput [formControlName]="'surName'" />
                            </mat-form-field>
                          </div>
                          <div class="col-3 guest-from-detail">
                            <mat-form-field id="basket-form" class="flex-auto date-picker guest-date">
                              <mat-label>{{'birthdate'| transloco}}*</mat-label>
                              <input matInput [matDatepicker]="picker" [formControlName]="'birthDate'"
                                [formControlName]="'birthDate'" placeholder="Choose a date">
                              <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                              <mat-datepicker #picker></mat-datepicker>
                            </mat-form-field>
                          </div>
                        </div>
                      </div>

                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="basket-event-detail col-12  col-md-12 col-lg-8 basket po-relative" [@flyOut]
              *ngIf="paymentProcess">
              <div class="row d-flex">
                <div class="col-md-12 mb-4 mt-4">
                  <div class="card mb-4">
                    <div class="card-header py-3">
                      <h4 class="mb-0">{{'billingdetails'| transloco}}</h4>
                    </div>
                    <hr class="my-4" />

                    <div class="card-body">
                      <form [formGroup]="paymentForm">
                        <!-- 2 column grid layout with text inputs for the first and last names -->
                        <div class="class">
                          <div class="row mb-4">
                            <div class="col-6 guest-from-detail">
                              <mat-form-field class="flex-auto form-outline">
                                <mat-label>{{'name'| transloco}}</mat-label>
                                <input matInput [formControlName]="'name'" />
                              </mat-form-field>
                            </div>
                            <div class="col-6 guest-from-detail">
                              <mat-form-field class="flex-auto form-outline">
                                <mat-label>{{'surname'| transloco}}</mat-label>
                                <input matInput [formControlName]="'lastname'" />
                              </mat-form-field>
                            </div>
                          </div>
                          <div class="row  mb-4">
                            <div class="col-12">

                              <mat-form-field class="flex-auto form-outline">
                                <mat-label>{{'adress'| transloco}}</mat-label>
                                <input matInput [formControlName]="'adress'" />
                              </mat-form-field>
                            </div>
                          </div>
                          <div class="row  mb-4">
                            <div class="col-12">
                              <mat-form-field class="flex-auto form-outline">
                                <mat-label>{{'email'| transloco}}</mat-label>
                                <input matInput [formControlName]="'email'" />
                              </mat-form-field>
                            </div>
                          </div>
                          <div class="row  mb-4">
                            <div class="col-12">
                              <mat-form-field class="flex-auto form-outline">
                                <mat-label>{{'phone'| transloco}}</mat-label>
                                <input matInput [formControlName]="'phone'" />
                              </mat-form-field>
                            </div>
                          </div>
                          <hr class="my-4" />
                          <div class="row  mb-4">
                            <div class="col-12">
                              <mat-checkbox matInput [formControlName]="'savenexttime'">{{'savenexttime'|
                                transloco}}</mat-checkbox>
                            </div>
                          </div>
                        </div>
                        <hr class="my-4" />
                        <ng-template matStepLabel>{{'Payment'|transloco}}</ng-template>
                        <mat-accordion class="mt-4" id="basket-Payment" hideToggle="true" multi="false">
                          <mat-expansion-panel (opened)="onPaymentExansionCheck('opened')" id="singlePaymentPanel"
                            (closed)="onPaymentExansionCheck('closed' )" [expanded]="true" *ngIf="isPayWithCreditCard"
                            #singlePaymentPanel>
                            <mat-expansion-panel-header>
                              <mat-panel-title class="basket-panel-title">
                                <i class="fa fa-solid fa-credit-card"></i>
                                {{'Credit Card'| transloco}}
                              </mat-panel-title>
                              <mat-panel-description>
                                <i class="fa {{(singlePaymentPanel.expanded ? ' fa-check-circle-o':' fa-circle-o')}}"
                                  [style]="(!singlePaymentPanel.expanded ? 'color: darkgrey' : 'color: green' )"></i>
                              </mat-panel-description>
                            </mat-expansion-panel-header>
                            <div class="class">

                              <div class="row">
                                <div class="payment-Cont">
                                  <div class="bPayTypes"
                                    [class.justify-content-center]="!(factSheetModel?.isPrePaymentActive)">
                                    <mat-button-toggle-group role="group" color="primary"
                                      *ngIf="factSheetModel?.isPrePaymentActive" id="toggleGroup"
                                      class="mat-button-toggle-group mat-button-toggle-group-appearance-standard ng-valid ng-touched ng-dirty">
                                      <mat-button-toggle value="all" (change)="onValChange($event)"
                                        class="mat-button-toggle mat-button-toggle-appearance-standard"
                                        id="mat-button-toggle-1"
                                        [class.mat-button-toggle-checked]="selectedPaymentTypeValue === 'all'">
                                        <button type="button" class="mat-button-toggle-button mat-focus-indicator"
                                          id="mat-button-toggle-1-button">
                                          <span class="mat-button-toggle-label-content">
                                            {{'payall'| transloco}}
                                          </span>
                                        </button>
                                      </mat-button-toggle>
                                      <mat-button-toggle value="prepay" (change)="onValChange($event)"
                                        class="mat-button-toggle mat-button-toggle-appearance-standard ng-star-inserted"
                                        id="mat-button-toggle-2"
                                        [class.mat-button-toggle-checked]="selectedPaymentTypeValue === 'prepay'">
                                        <button type="button" class="mat-button-toggle-button mat-focus-indicator"
                                          id="mat-button-toggle-2-button">
                                          <span class="mat-button-toggle-label-content">
                                            {{'prepay'| transloco}}
                                          </span>
                                        </button>
                                      </mat-button-toggle>
                                    </mat-button-toggle-group>
                                    <div class="payment-Amount">
                                      {{'Total Price'| transloco}}: <span
                                        [class.totalAmount]="selectedPaymentTypeValue === 'prepay'">{{(totalPrice
                                        |
                                        currency:'':'':'1.2-2')}} {{selectedECollections.symbol}}
                                      </span>
                                      <span class="prepayAmount ml-1"
                                        [class.prepayAmountDisplay]="selectedPaymentTypeValue === 'prepay'">{{(totalPrice
                                        * (factSheetModel?.prePaymentRatio ?? 0) / 100 | currency:'':'':'1.2-2')}}
                                        {{selectedECollections.symbol}}
                                      </span>
                                    </div>
                                  </div>
                                </div>
                                <span class="prepayAmount caption_aJlUv"
                                  [class.remainingAmountPrePay]="selectedPaymentTypeValue === 'prepay'">
                                  {{'Remaining
                                  Amount'|
                                  transloco}}:
                                  {{( +totalPrice - (totalPrice
                                  * (factSheetModel?.prePaymentRatio ?? 0) / 100) |
                                  currency:'':'':'1.2-2')}} {{selectedECollections.symbol}}</span>
                              </div>
                              <div class="row mb-4">
                                <div class="col-12">
                                  <mat-form-field class="flex-auto form-outline">
                                    <mat-label>{{ 'cardname' | transloco}}</mat-label>
                                    <input matInput [formControlName]="'cardname'" />
                                    <mat-error *ngIf="paymentForm.get('step2')?.get('cardname')?.hasError('required')">
                                      {{ 'cardnamerequired' | transloco}}
                                    </mat-error>
                                  </mat-form-field>
                                </div>
                              </div>
                              <div class="row mb-4">
                                <div class="col-12">
                                  <mat-form-field class="flex-auto form-outline">
                                    <mat-label>{{ 'cardnumber' | transloco}}</mat-label>
                                    <input (input)="onValueChangeCreditCard($event)" matInput
                                      [formControlName]="'cardnumber'" />
                                  </mat-form-field>
                                </div>
                              </div>
                              <div class="row mb-4">
                                <div class="col-4" style="padding-left: 15px !important;padding-right:15px !important">
                                  <mat-form-field class="flex-auto form-outline">
                                    <mat-label>{{ 'axpmonth' | transloco}}</mat-label>
                                    <mat-select [formControlName]="'month'" required>
                                      <mat-option *ngFor="let option of monthSelectBox" [value]="option">
                                        {{ option }}
                                      </mat-option>
                                    </mat-select>
                                  </mat-form-field>
                                </div>
                                <div class="col-4" style="padding-left: 15px !important;padding-right:15px !important">
                                  <mat-form-field id="basket-form" class="flex-auto">
                                    <mat-label>{{ 'expyear' | transloco}}</mat-label>
                                    <mat-select [formControlName]="'year'" required id="basket-form">
                                      <mat-option *ngFor="let option of yearSelectBox" [value]="option">
                                        {{ option }}
                                      </mat-option>
                                    </mat-select>
                                  </mat-form-field>
                                </div>
                                <div class="col-4" style="padding-left: 15px !important;padding-right:15px !important">
                                  <mat-form-field id="basket-form" class="flex-auto">
                                    <mat-label>{{ 'cvc' | transloco}}</mat-label>
                                    <input matInput type="text" [formControlName]="'cvc'" min="0"
                                      (input)="onValueChangeCvv($event)" required />
                                  </mat-form-field>
                                </div>
                              </div>
                              <div class="row" *ngIf="false">
                                <mat-accordion id="basket-Item">
                                  <mat-expansion-panel [expanded]="false">
                                    <mat-expansion-panel-header>
                                      <mat-panel-title class="basket-installment-panel-title">
                                        {{'Installment'| transloco}}
                                      </mat-panel-title>
                                    </mat-expansion-panel-header>
                                    <div class="row">
                                    </div>
                                  </mat-expansion-panel>
                                </mat-accordion>
                              </div>
                              <div class="row mt-3" *ngIf="newInstallment.length>0">
                                <mat-radio-group aria-label="Select an option" [(ngModel)]="selectedInstallment"
                                  (change)="onSelectedInstallmentChange($event)"
                                  class="mat-radio-group ng-untouched ng-pristine ng-valid" style="width: 100%;">
                                  <div class="installment-column ng-star-inserted">
                                    <div class="instalment-header" style="    display: flex;
                                                                            justify-content: center;"
                                      *ngIf="cardBankName">
                                      <div>
                                        <img class="bankicon" style="    max-width: 100%;
                                                                                    max-height: 6vh;"
                                          src="assets/images/bank-icons/{{cardBankName}}-icon.png">
                                      </div>
                                    </div>
                                    <div class="installment-row table-start">
                                      <div class="ins-title">{{'payments.installmentcount' |
                                        transloco}}</div>
                                      <div class="ins-label">{{'payments.installmentamount' |
                                        transloco}}</div>
                                      <div class="ins-label">{{'payments.totalprice' | transloco}}
                                      </div>
                                    </div>
                                    <div class="installment-row ng-star-inserted"
                                      *ngFor="let installment of newInstallment">
                                      <div class="count-row">
                                        <mat-radio-button class="mat-radio-button mat-radio-checked mat-accent"
                                          [value]="installment.key" [checked]="installment.key === selectedInstallment">
                                          <label class="mat-radio-label">
                                            <span class="mat-radio-container">
                                              <span class="mat-radio-outer-circle">
                                              </span>
                                              <span class="mat-radio-inner-circle">
                                              </span>
                                              <input type="radio" class="mat-radio-input cdk-visually-hidden">
                                              <span class="mat-ripple mat-radio-ripple mat-focus-indicator"><span
                                                  class="mat-ripple-element mat-radio-persistent-ripple">
                                                </span></span></span><span class="mat-radio-label-content">
                                              {{ ((+installment.key) === 1 ?
                                              ('payments.oneinstallment' | transloco) : (
                                              (+installment.key) + ' '+
                                              ('payments.installment' | transloco)))}}
                                            </span></label>
                                        </mat-radio-button>
                                      </div>
                                      <div class="count-amount">
                                        {{ (+installment.value.value1 / +installment.key) |
                                        currency:'':'':'1.2-2'}} {{selectedECollections.symbol}}
                                      </div>

                                      <div class="count-sum-amount">
                                        {{ (installment.value.value1) |
                                        currency:'':'':'1.2-2'}} {{selectedECollections.symbol}}
                                      </div>
                                    </div>
                                  </div>
                                </mat-radio-group>
                              </div>
                            </div>
                          </mat-expansion-panel>
                          <mat-expansion-panel (opened)="onPaymentExansionCheck('opened')" id="partialPaymentPanel"
                            (closed)="onPaymentExansionCheck('closed')" #partialPaymentPanel
                            *ngIf="IsMultipleCardPaymentActive">
                            <mat-expansion-panel-header>
                              <mat-panel-title class="basket-panel-title">
                                <i class="fa fa-solid fa-credit-card"></i>
                                {{'Multiple Credit Card Payment'| transloco}}
                              </mat-panel-title>
                              <mat-panel-description>
                                <i class="fa {{(partialPaymentPanel.expanded ? ' fa-check-circle-o':' fa-circle-o')}}"
                                  [style]="(!partialPaymentPanel.expanded ? 'color: darkgrey' : 'color: green' )"></i>
                              </mat-panel-description>
                            </mat-expansion-panel-header>
                            <div class="class">
                              <div class="row partial-payment-row">
                                <div class="tab-cards">
                                  <a class="tab-card-first">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                                      *ngIf="remainingAmount" fill="none">
                                      <path stroke="#008A09" stroke-linecap="round" stroke-linejoin="round"
                                        d="m2.5 8.5 3.5 4 7.5-7"></path>
                                    </svg>
                                    <span
                                      class=" {{!remainingAmount ? 'first-tab-span-firstcard first-tab-span' : 'first-tab-span-approved'}}">
                                      {{'Birinci kart'| transloco}}</span>

                                    <svg class="tab-item-svg" xmlns="http://www.w3.org/2000/svg" width="11" height="36"
                                      style="fill: var(--ticket-item-background) !important;;" viewBox="0 0 8 36">
                                      <path fill="#fff" d="m0 0 8 18-7 18V0Z"></path>
                                      <path stroke="#E5E5E5" d="m0 0 9 18.1L1 36"></path>
                                    </svg>
                                  </a>
                                  <a class=" {{remainingAmount ? 'tab-card-first' : 'tab-card-second'}}">
                                    <span
                                      class=" {{remainingAmount ? 'first-tab-span-firstcard first-tab-span ' : ''}}">
                                      {{'İkinci kart'| transloco}}</span></a>
                                </div>
                                <div class="first_card_amount_PiHGp">
                                  <div class="input_wrapper_B_Fu5">
                                    <div class="input_container_NTtwU valid_pG3Si" ng-controller="MainCtrl">
                                      <input id="firstPaidAmount" name="firstCardAmount" type="number"
                                        value="{{amountPaidInitial}}" max="{{totalPrice}}" [disabled]="remainPayment"
                                        (change)="partialAmountChange($event)" min="0" />
                                    </div>
                                  </div>
                                  <div class="tl_H1IlZ">TL</div>
                                </div>
                                <span *ngIf="!remainPayment" class="caption_aJlUv"> {{'Remaining Amount'|
                                  transloco}}:
                                  {{( +totalPrice - +amountPaidInitial |
                                  currency:'':'':'1.2-2')}} {{selectedECollections.symbol}}</span>
                              </div>

                              <div class="row mb-4">
                                <div class="col-12">
                                  <mat-form-field class="flex-auto form-outline">
                                    <mat-label>{{ 'cardname' | transloco}}</mat-label>
                                    <input matInput [formControlName]="'cardname'" />
                                    <mat-error *ngIf="paymentForm.get('step2')?.get('cardname')?.hasError('required')">
                                      {{ 'cardnamerequired' | transloco}}
                                    </mat-error>
                                  </mat-form-field>
                                </div>
                              </div>
                              <div class="row mb-4">
                                <div class="col-12">
                                  <mat-form-field class="flex-auto form-outline">
                                    <mat-label>{{ 'cardnumber' | transloco}}</mat-label>
                                    <input (input)="onValueChangeCreditCard($event)" matInput
                                      [formControlName]="'cardnumber'" />
                                  </mat-form-field>
                                </div>
                              </div>
                              <div class="row mb-4">
                                <div class="col-4" style="padding-left: 15px !important;padding-right:15px !important">
                                  <mat-form-field class="flex-auto form-outline">
                                    <mat-label>{{ 'axpmonth' | transloco}}</mat-label>
                                    <mat-select [formControlName]="'month'" required>
                                      <mat-option *ngFor="let option of monthSelectBox" [value]="option">
                                        {{ option }}
                                      </mat-option>
                                    </mat-select>
                                  </mat-form-field>
                                </div>
                                <div class="col-4" style="padding-left: 15px !important;padding-right:15px !important">
                                  <mat-form-field id="basket-form" class="flex-auto">
                                    <mat-label>{{ 'expyear' | transloco}}</mat-label>
                                    <mat-select [formControlName]="'year'" required id="basket-form">
                                      <mat-option *ngFor="let option of yearSelectBox" [value]="option">
                                        {{ option }}
                                      </mat-option>
                                    </mat-select>
                                  </mat-form-field>
                                </div>
                                <div class="col-4" style="padding-left: 15px !important;padding-right:15px !important">
                                  <mat-form-field id="basket-form" class="flex-auto">
                                    <mat-label>{{ 'cvc' | transloco}}</mat-label>
                                    <input matInput type="text" [formControlName]="'cvc'" min="0"
                                      (input)="onValueChangeCvv($event)" required />
                                  </mat-form-field>
                                </div>
                              </div>
                              <div class="row mt-3" *ngIf="newInstallment.length>0">
                                <mat-radio-group aria-label="Select an option" [(ngModel)]="selectedInstallment"
                                  (change)="onSelectedInstallmentChange($event)"
                                  class="mat-radio-group ng-untouched ng-pristine ng-valid"
                                  style="width: 100%;color:#fff">
                                  <div class="installment-column ng-star-inserted">
                                    <div class="instalment-header" style="    display: flex;
                                                                            justify-content: center;"
                                      *ngIf="cardBankName">
                                      <div>
                                        <img class="bankicon" style="    max-width: 100%;
                                                                                    max-height: 6vh;"
                                          src="assets/images/bank-icons/{{cardBankName}}-icon.png">
                                      </div>
                                    </div>
                                    <div class="installment-row table-start">
                                      <div class="ins-title">{{'payments.installmentcount' |
                                        transloco}}</div>
                                      <div class="ins-label">{{'payments.installmentamount' |
                                        transloco}}</div>
                                      <div class="ins-label">{{'payments.totalprice' | transloco}}
                                      </div>
                                    </div>
                                    <!-- <div *ngFor="let installment of installments | keyvalue">
                                                                                <p>Installment {{installment.key}}:</p>
                                                                                <p>Value 1: {{installment.value.value1}}</p>
                                                                                <p>Value 2: {{installment.value.value2}}</p>
                                                                            </div> -->
                                    <div class="installment-row ng-star-inserted"
                                      *ngFor="let installment of newInstallment">
                                      <div class="count-row">
                                        <mat-radio-button class="mat-radio-button mat-radio-checked mat-accent"
                                          [value]="installment.key" [checked]="installment.key === selectedInstallment">
                                          <label class="mat-radio-label">
                                            <span class="mat-radio-container">
                                              <span class="mat-radio-outer-circle">
                                              </span>
                                              <span class="mat-radio-inner-circle">
                                              </span>
                                              <input type="radio" class="mat-radio-input cdk-visually-hidden">
                                              <span class="mat-ripple mat-radio-ripple mat-focus-indicator"><span
                                                  class="mat-ripple-element mat-radio-persistent-ripple">
                                                </span></span></span><span class="mat-radio-label-content">
                                              {{ ((+installment.key) === 1 ?
                                              ('payments.oneinstallment' | transloco) : (
                                              (+installment.key) + ' '+
                                              ('payments.installment' | transloco)))}}
                                            </span></label>
                                        </mat-radio-button>
                                      </div>
                                      <div class="count-amount">
                                        {{ (+installment.value.value1 / +installment.key) |
                                        currency:'':'':'1.2-2'}} {{selectedECollections.symbol}}
                                      </div>

                                      <div class="count-sum-amount">
                                        {{ (installment.value.value1) |
                                        currency:'':'':'1.2-2'}} {{selectedECollections.symbol}}
                                      </div>
                                    </div>
                                  </div>
                                </mat-radio-group>
                              </div>
                            </div>
                            <div class="row" *ngIf="false">
                              <mat-accordion id="basket-Item">
                                <mat-expansion-panel [expanded]="false">
                                  <mat-expansion-panel-header>
                                    <mat-panel-title class="basket-installment-panel-title">
                                      {{'Installment'| transloco}}
                                    </mat-panel-title>
                                  </mat-expansion-panel-header>
                                  <div class="row">
                                  </div>
                                </mat-expansion-panel>
                              </mat-accordion>
                            </div>
                          </mat-expansion-panel>
                          <mat-expansion-panel
                            *ngIf="(selectedECollections.bankTransferList && selectedECollections.bankTransferList.length>0  && isPayWithBankTransfer)"
                            (opened)="onPaymentExansionCheck('opened')" (closed)="onPaymentExansionCheck('closed')"
                            #banktransferPanel id="banktransferPanel">
                            <mat-expansion-panel-header>
                              <mat-panel-title class="basket-panel-title">
                                <i class="fa fa-solid fa-credit-card"></i>
                                {{'banktransfer'| transloco}}
                              </mat-panel-title>
                              <mat-panel-description>
                                <i class="fa {{(banktransferPanel.expanded ? ' fa-check-circle-o':' fa-circle-o')}}"
                                  [style]="(!banktransferPanel.expanded ? 'color: darkgrey' : 'color: green' )"></i>
                              </mat-panel-description>
                            </mat-expansion-panel-header>
                            <div class="row">
                              <div class="account-span">
                                <strong class="acc-title-span">{{'accountTitle'| transloco}} </strong>
                                <div class="acc-rem-span">{{selectedECollections.accountHolder}}</div>
                              </div>
                              <!-- <div class="account-span">
                                <strong class="acc-title-span voucher-rev">{{'voucherTitle'|
                                  transloco}}</strong>
                                <div class="acc-rem-span">{{voucher}}</div>
                              </div> -->
                              <div class="account-span voucher-desciption">
                                <div class="acc-rem-span">{{selectedECollections.preWriting}}</div>
                              </div>
                              <table border="1" class="installment-table">
                                <tbody class="installment-body">
                                  <tr class=" bank-column-header">
                                    <th align="center">{{'bankName'| transloco}}</th>
                                    <th align="center">{{'bankBranch'| transloco}}</th>
                                    <th align="center">{{'bankaccountnum'| transloco}}</th>
                                  </tr>
                                </tbody>
                                <tbody>
                                  <tr *ngFor="let bankAcc of selectedECollections.bankTransferList">
                                    <!-- <td>
                                                                                    <img src="assets/images/bank-icons/{{bankAcc.bank}}-icon.png"
                                                                                        style="max-height: 30px" alt="Bank Icon">
                                                                                </td> -->
                                    <td>
                                      {{ bankAcc.bankName}}
                                    </td>
                                    <td>
                                      {{ bankAcc.branch}}
                                    </td>
                                    <td>
                                      {{ bankAcc.ibanNumber | accountNumberFormat }}
                                    </td>
                                  </tr>

                                </tbody>
                              </table>
                            </div>
                          </mat-expansion-panel>

                          <mat-expansion-panel id="payInHotelPanel" #payInHotelPanel [expanded]="false"
                            *ngIf="isPayOnGate" (opened)="OnPayInHotelCheck('opened')"
                            (closed)="OnPayInHotelCheck('closed')">
                            <mat-expansion-panel-header>
                              <mat-panel-title class="basket-panel-title">
                                <i class="fa fa-solid fa-credit-card"></i>
                                {{'payinhotel'| transloco}}
                              </mat-panel-title>
                              <mat-panel-description>
                                <i class="fa {{(payInHotelPanel.expanded ? ' fa-check-circle-o':' fa-circle-o')}}"
                                  [style]="(!payInHotelPanel.expanded ? 'color: darkgrey' : 'color: green' )"></i>
                              </mat-panel-description>
                            </mat-expansion-panel-header>
                          </mat-expansion-panel>

                          <!-- <div class="row" *ngIf="this.kvkkText.length > 0">
                            <div class="col-1">
                              <mat-checkbox class="example-margin" (change)="acceptKVKK($event)">
                              </mat-checkbox>
                            </div>
                            <div class="col-11" style="white-space: normal;margin-top: 8px;cursor: pointer;"
                              [innerHTML]="'I read and accepted the <strong><u>Personal Data Protection Law</u></strong>.' | transloco"
                              (click)="showKvkkText()"></div>
                          </div> -->

                          <!-- <div class="row">
                            <div class="col-1">
                              <mat-checkbox class="example-margin" (change)="acceptTerms($event)">
                              </mat-checkbox>
                            </div>
                            <div class="col-11" style="white-space: normal;margin-top: 8px;">
                              <span>{{'You confirm that you have read and accepted documents in below
                                :'|transloco}}</span>
                              <li style="cursor: pointer;" *ngIf="this.termsText.length>0" (click)="showTermsText()">
                                <b><u>{{'Terms and
                                    Conditions' | transloco}}</u></b>
                              </li>
                              <li style="cursor: pointer;" *ngIf="this.privacyText.length>0"
                                (click)="showPrivacyText()"><b><u>{{'Privacy
                                    Agreement' | transloco}}</u></b></li>
                              <li style="cursor: pointer;" *ngIf="this.cancelText.length > 0"
                                (click)="showCancelText()"><b><u>{{'Cancel and
                                    Refund Conditions'| transloco}}</u></b></li>
                              <li style="cursor: pointer;" *ngIf="cookiePolicy" (click)="showCookiesText()">
                                <b><u>{{'Cookies
                                    Policy' | transloco}}</u></b>
                              </li>
                            </div>
                          </div> -->
                        </mat-accordion>
                        <!-- <div class="cardpayment-section" *ngIf="!noPayment">
                          <h4 class="mb-4">{{ 'payment' | transloco}}</h4>
                          <div class="form-check">
                            <input class="form-check-input" type="radio" name="flexRadioDefault" id="checkoutForm3"
                              checked />
                            <label class="form-check-label" for="checkoutForm3">
                              {{ 'creditcard' | transloco}}
                            </label>
                          </div>
                          <div class="row mb-4">
                            <div class="col-12">
                              <mat-form-field class="flex-auto form-outline">
                                <mat-label>{{ 'cardname' | transloco}}</mat-label>
                                <input matInput [formControlName]="'cardname'" />
                                <mat-error *ngIf="paymentForm.get('cardname')?.hasError('required')">
                                  {{ 'cardnamerequired' | transloco}}
                                </mat-error>
                              </mat-form-field>
                            </div>
                          </div>
                          <div class="row mb-4">
                            <div class="col-12">
                              <mat-form-field class="flex-auto form-outline">
                                <mat-label>{{ 'cardnumber' | transloco}}</mat-label>
                                <input (input)="onValueChangeCreditCard($event)" matInput
                                  [formControlName]="'cardnumber'" />
                              </mat-form-field>
                            </div>
                          </div>
                          <div class="row mb-4">
                            <div class="col-4" style="padding-left: 15px !important;padding-right:15px !important">
                              <mat-form-field class="flex-auto form-outline">
                                <mat-label>{{ 'axpmonth' | transloco}}</mat-label>
                                <mat-select [formControlName]="'month'" required>
                                  <mat-option *ngFor="let option of monthSelectBox" [value]="option">
                                    {{ option }}
                                  </mat-option>
                                </mat-select>
                              </mat-form-field>
                            </div>
                            <div class="col-4" style="padding-left: 15px !important;padding-right:15px !important">
                              <mat-form-field id="basket-form" class="flex-auto">
                                <mat-label>{{ 'expyear' | transloco}}</mat-label>
                                <mat-select [formControlName]="'year'" required id="basket-form">
                                  <mat-option *ngFor="let option of yearSelectBox" [value]="option">
                                    {{ option }}
                                  </mat-option>
                                </mat-select>
                              </mat-form-field>
                            </div>
                            <div class="col-4" style="padding-left: 15px !important;padding-right:15px !important">
                              <mat-form-field id="basket-form" class="flex-auto">
                                <mat-label>{{ 'cvc' | transloco}}</mat-label>
                                <input matInput type="text" [formControlName]="'cvc'" min="0"
                                  (input)="onValueChangeCvv($event)" required />
                              </mat-form-field>
                            </div>
                          </div>
                        </div> -->
                        <div class="row mt-4 checkbox-container">
                          <input [value]="isChecked" type="checkbox" id="c" required (click)="changeInputValue()">
                          <!-- <label for="agreementCheckbox" id="agreementLabel"
                            *ngIf="(langCode ?? getActiveLang()) === 'tr'"><a id="termsLink"
                              (click)="openTermsandConditionDialog(2)">Gizlilik taahhüdü</a>'nü ve <a id="termsLink"
                              (click)="openTermsandConditionDialog(1)">Kullanım Koşulları</a>'ni okudum. Kabul
                            ediyorum.</label>
                          <label for="agreementCheckbox" id="agreementLabel"
                            *ngIf="(langCode ?? getActiveLang()) === 'en'">I have
                            read and accept
                            the <a id="termsLink" (click)="openTermsandConditionDialog(2)">Privacy Policy</a>.</label>
                          <label for="agreementCheckbox" id="agreementLabel"
                            *ngIf="(langCode ?? getActiveLang())  === 'fr'">J'ai lu
                            et j'accepte la
                            politique de <a id="termsLink"
                              (click)="openTermsandConditionDialog(2)">confidentialité</a>.</label>
                          <label for="agreementCheckbox" id="agreementLabel"
                            *ngIf="(langCode ?? getActiveLang())  === 'ru'">Я
                            прочитал и принимаю
                            Политику
                            <a id="termsLink" (click)="openTermsandConditionDialog(2)">конфиденциальности</a>.</label>
                          <label for="agreementCheckbox" id="agreementLabel"
                            *ngIf="(langCode ?? getActiveLang())  === 'de'">Ich habe
                            die
                            <a id="termsLink" (click)="openTermsandConditionDialog(2)">Datenschutzerklärung</a> gelesen
                            und akzeptiere
                            sie.</label> -->
                          <label for="agreementCheckbox" id="agreementLabel"
                            *ngIf="(langCode ?? getActiveLang()) === 'tr'">
                            <a id="termsLink" (click)="openTermsandConditionDialog(2)">Gizlilik taahhüdü</a>'nü ve
                            <a id="termsLink" (click)="openTermsandConditionDialog(1)">Kullanım Koşulları</a>'ni okudum.
                            Kabul ediyorum.
                          </label>

                          <label for="agreementCheckbox" id="agreementLabel"
                            *ngIf="(langCode ?? getActiveLang()) === 'en'">
                            I have read and accept the
                            <a id="termsLink" (click)="openTermsandConditionDialog(2)">Privacy Policy</a> and
                            <a id="termsLink" (click)="openTermsandConditionDialog(1)">Terms of Use</a>.
                          </label>

                          <label for="agreementCheckbox" id="agreementLabel"
                            *ngIf="(langCode ?? getActiveLang()) === 'fr'">
                            J'ai lu et j'accepte la
                            <a id="termsLink" (click)="openTermsandConditionDialog(2)">politique de confidentialité</a>
                            et les
                            <a id="termsLink" (click)="openTermsandConditionDialog(1)">Conditions d'Utilisation</a>.
                          </label>

                          <label for="agreementCheckbox" id="agreementLabel"
                            *ngIf="(langCode ?? getActiveLang()) === 'ru'">
                            Я прочитал и принимаю
                            <a id="termsLink" (click)="openTermsandConditionDialog(2)">Политику конфиденциальности</a> и
                            <a id="termsLink" (click)="openTermsandConditionDialog(1)">Условия использования</a>.
                          </label>

                          <label for="agreementCheckbox" id="agreementLabel"
                            *ngIf="(langCode ?? getActiveLang()) === 'de'">
                            Ich habe die
                            <a id="termsLink" (click)="openTermsandConditionDialog(2)">Datenschutzerklärung</a> und die
                            <a id="termsLink" (click)="openTermsandConditionDialog(1)">Nutzungsbedingungen</a> gelesen
                            und akzeptiere sie.
                          </label>

                        </div>
                        <!-- 
                        <button class="btn btn-primary btn-lg btn-block" type="submit">
                          Continue to checkout
                        </button> -->
                      </form>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-4 col-lg-4 basket basket-summary">
              <div class="m-orderSummary" disabledbtn="true">
                <div class="m-orderSummary__header">
                  <h3 class="m-orderSummary__title">{{ 'ordersummary' | transloco}}</h3>
                </div>
                <div class="m-orderSummary__body">
                  <ul class="m-orderSummary__calculate">
                    <li class="m-orderSummary__item"><span class="m-orderSummary__name">{{ 'ordertotal' |
                        transloco}}</span>
                      <span class="m-orderSummary__value">{{ totalPrice |
                        currency:'':'':'1.2-2'}} TL</span>
                    </li>
                    <li class="m-orderSummary__item -arrowUp"><span class="m-orderSummary__name">{{ 'basketdetails' |
                        transloco}}</span>
                      <span class="m-orderSummary__value"> </span>
                    </li>
                    <li class="subList">
                      <ul>

                        <li class="m-orderSummary__item -last"><span class="m-orderSummary__name">{{ 'activitytotal' |
                            transloco}}</span>
                          <span class="m-orderSummary__value">{{ ticketPrices |
                            currency:'':'':'1.2-2'}} TL</span>
                        </li>
                        <li class="m-orderSummary__item -last"><span class="m-orderSummary__name">{{ 'extratotal' |
                            transloco}}</span>
                          <span class="m-orderSummary__value">{{ extraPrices |
                            currency:'':'':'1.2-2'}} TL</span>
                        </li>
                        <li class="m-orderSummary__item -last" *ngIf="totalDiscount !== 0"><span
                            class="m-orderSummary__name">{{ 'discounttotal' |
                            transloco}}</span>
                          <span class="m-orderSummary__value">- {{ totalDiscount |
                            currency:'':'':'1.2-2'}} TL</span>
                        </li>
                      </ul>
                    </li>

                    <li class="m-orderSummary__item -grandTotal"><span class="m-orderSummary__name">{{
                        'amountwillbepaid' | transloco}}</span> <span class="m-orderSummary__value"
                        ins-init-condition="#Li1ncmFuZFRvdGFsIC5tLW9yZGVyU3VtbWFyeV9fdmFsdWUsICNlbXR5Q2FydA==">{{
                        totalPrice |
                        currency:'':'':'1.2-2'}}
                        TL</span></li>
                  </ul>
                  <!-- <ul class="m-orderSummary__calculate">
                    <li class="m-orderSummary__item"><span class="m-orderSummary__name">Toplam Tutar (KDV Dahil)</span>
                      <span class="m-orderSummary__value">{{ calculateTotalPrice() |
                        currency:'':'':'1.2-2'}} TL</span>
                    </li>
                    <li class="m-orderSummary__item -arrowUp"><span class="m-orderSummary__name">Toplam İndirim
                        Tutarı</span> <span class="m-orderSummary__value">{{ calculateTotalPrice(10) |
                        currency:'':'':'1.2-2'}} TL</span></li>
                    <li class="subList">
                      <ul>

                        <li class="m-orderSummary__item -last"><span class="m-orderSummary__name">Kampanya
                            İndirimi</span> <span class="m-orderSummary__value">{{ calculateTotalPrice(10) |
                            currency:'':'':'1.2-2'}} TL</span></li>
                      </ul>
                    </li>

                    <li class="m-orderSummary__item -grandTotal"><span class="m-orderSummary__name">Ödenecek
                        Tutar</span> <span class="m-orderSummary__value"
                        ins-init-condition="#Li1ncmFuZFRvdGFsIC5tLW9yZGVyU3VtbWFyeV9fdmFsdWUsICNlbXR5Q2FydA==">{{
                        calculateTotalPrice(90) |
                        currency:'':'':'1.2-2'}}
                        TL</span></li>
                  </ul> -->
                </div>
                <div class="m-orderSummary__bottom"><button type="button" id="nextBtn" class="btn -dark -large"
                    (click)="paymentProcessContinue()">{{(paymentProcess ? 'buyspan' : 'continuespan')|
                    transloco}}</button></div>
              </div>
              <div>
                <div>
                  <!-- <button id="addCouponCodeBtn" type="button" class="m-couponSummary">
                    <div class="m-couponSummary__content">
                      <svg width="36px" height="22px" class="icon icon-discount">
                        <use xlink:href="#icon-discount"></use>
                      </svg> 
                      <span class="m-couponSummary__text">Kupon Kodu Ekleyin</span>
                    </div> 
                    <svg width="16px"
                      height="16px" class="icon icon-arrow-right">
                      <use xlink:href="#icon-arrow-right"></use>
                    </svg>
                  </button> -->
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div id="paymentForm"></div>